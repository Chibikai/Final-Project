(self.ic_pbjsChunk=self.ic_pbjsChunk||[]).push([[30],{7781:function(e,n,r){var t,i=r(8525),o=r(4358),s=r(265),d=r(5644),c=r(1039),a=r(3193),u=r(4699),f=r(2021),p=r(4614),b={appnexus:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},timeout:1e3},appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},timeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},timeout:500},openx:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.openx.net/openrtb2/auction",noP1Consent:"https://prebid.openx.net/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.openx.net/cookie_sync",noP1Consent:"https://prebid.openx.net/cookie_sync"},timeout:1e3}},l=r(8928),v=r(2797),y=r(7673),m=r(3324),g=r(1002),h=r(4942),C=r(4980),O=r(6475),B=r(9626),P=r(1333),q=r(9702),j=r(1021),R=r(6372),S=r(8640);function x(e,n,r){if(n===r)return e;var t=e;if("function"==typeof(0,S.R)().convertCurrency)try{t=(0,S.R)().convertCurrency(e,n,r)}catch(e){}return t}function w(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(!e)return;if("string"==typeof e)return E(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var t=0,i=function(){};return{s:i,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){d=!0,o=e},f:function(){try{s||null==r.return||r.return()}finally{if(d)throw o}}}}function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function I(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function k(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?I(Object(r),!0).forEach((function(n){(0,h.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var A=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),N=(0,C.x)({processors:P.X,context:{netRevenue:!0},imp:function(e,n,r){Object.assign(r,n.pbsData);var t=e(n,r);if(Object.values(j.E).some((function(e){return t[e]})))return t.secure=r.s2sBidRequest.s2sConfig.secure,t},request:function(e,n,r,t){if(n.length){var i=t.s2sBidRequest,s=t.requestedBidders,d=t.eidPermissions,c=e(n,r,t);return c.tmax=i.s2sConfig.timeout,(0,O.N)(c,"source.tid",r.auctionId),[c.app,c.site].forEach((function(e){var n;!e||null!==(n=e.publisher)&&void 0!==n&&n.id||(0,O.N)(e,"publisher.id",i.s2sConfig.accountId)})),(0,o.kJ)(d)&&d.length>0&&(s&&(0,o.kJ)(s)&&(d=d.map((function(e){return k(k({},e),{},{bidders:e.bidders.filter((function(e){return s.includes(e)}))})}))),(0,O.N)(c,"ext.prebid.data.eidpermissions",d)),c}(0,o.H)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse:function(e,n,r){var t,i,o=r.actualBidRequests.get(r.seatbid.seat);null==o&&(o=r.actualBidRequests.get(null)),o&&Object.assign(r,{bidRequest:o,bidderRequest:r.actualBidderRequests.find((function(e){return e.bidderCode===o.bidder}))});var s=e(n,r);s.requestBidder=null===(t=o)||void 0===t?void 0:t.bidder,null!==(i=s.native)&&void 0!==i&&i.ortb&&(s.adm=s.native.ortb),s.requestTimestamp=r.requestTimestamp;var c=0!==n.price?d.Q_.Q:d.Q_.H;return{bid:Object.assign((0,B.m)(c,{src:d.os.YZ,bidId:o?o.bidId||o.bid_Id:null,transactionId:r.adUnit.transactionId,auctionId:r.bidderRequest.auctionId}),s),adUnit:r.adUnit.code}},overrides:(t={},(0,h.Z)(t,R.DZ,{id:function(e,n,r,t){n.id=t.impId},params:function(e,n,r,t){var i,o=t.s2sBidRequest.s2sConfig.adapterOptions,s=w(t.actualBidRequests.values());try{for(s.s();!(i=s.n()).done;){var d=i.value;(0,q.j)(n,d,t,t),o&&o[d.bidder]&&Object.assign(n.ext.prebid.bidder[d.bidder],o[d.bidder])}}catch(e){s.e(e)}finally{s.f()}},bidfloor:function(e,n,r,t){var i,o,s=w(t.actualBidRequests.values());try{for(s.s();!(o=s.n()).done;){var d=o.value,c={};if(e(c,d,t),null==c.bidfloorcur||null==c.bidfloor){i=null;break}if(null==i)i=c;else{var a=x(c.bidfloor,c.bidfloorcur,i.bidfloorcur);null!=a&&a<i.bidfloor&&(i=c)}}}catch(e){s.e(e)}finally{s.f()}null!=i&&Object.assign(n,i)}}),(0,h.Z)(t,R.Z,{fpd:function(e,n,r,t){var i,s,d;((0,o.Ee)(n,null===(i=t.s2sBidRequest.ortb2Fragments)||void 0===i?void 0:i.global),t.s2sBidRequest.s2sConfig.extPrebid&&"object"===(0,g.Z)(t.s2sBidRequest.s2sConfig.extPrebid))&&(0,O.N)(n,"ext.prebid",(0,o.Ee)((null===(d=n.ext)||void 0===d?void 0:d.prebid)||{},t.s2sBidRequest.s2sConfig.extPrebid));var c=Object.entries((null===(s=t.s2sBidRequest.ortb2Fragments)||void 0===s?void 0:s.bidder)||{}).map((function(e){var n=(0,m.Z)(e,2);return{bidders:[n[0]],config:{ortb2:n[1]}}}));c.length&&(0,O.N)(n,"ext.prebid.bidderconfig",c)},extPrebidAliases:function(e,n,r,t){t.actualBidderRequests.forEach((function(r){return e(n,r,t)}))},sourceExtSchain:function(e,n,r,t){var i,o=(0,s.Z)(n,"ext.prebid.schains")||[],d=new Set(o.flatMap((function(e){return e.bidders})));o=Object.values(o.concat(t.actualBidderRequests.filter((function(e){return!d.has(e.bidderCode)})).map((function(e){return{bidders:[e.bidderCode],schain:(0,s.Z)(e,"bids.0.schain")}}))).filter((function(e){var n=e.bidders,r=e.schain;return(null==n?void 0:n.length)>0&&r})).reduce((function(e,n){var r=n.bidders,t=n.schain,o=JSON.stringify(t);return e.hasOwnProperty(o)||(e[o]={bidders:new Set,schain:t}),r.forEach((function(n){return e[o].bidders.add(n)})),(null==i||e[o].bidders.size>i.bidders.size)&&(i=e[o]),e}),{})).map((function(e){var n=e.bidders,r=e.schain;return{bidders:Array.from(n),schain:r}})),null!=i&&(0,O.N)(n,"source.ext.schain",i.schain),o.length&&(0,O.N)(n,"ext.prebid.schains",o)}}),(0,h.Z)(t,R.YC,{serverSideStats:function(e,n,r,t){t.actualBidderRequests.forEach((function(i){return e(n,r,k(k({},t),{},{bidderRequest:i,bidRequests:i.bids}))}))}}),t)});var T,Z,_=r(9128),U=a.vc.getConfig,D=d.os.YZ,H=0,J={bidders:Object.freeze([]),timeout:1e3,syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{context:1,plcmttype:1,eventtrackers:[{event:1,methods:[1]}]}};function M(e){if(e){var n=Array.isArray(e)?e:[e],r=[];return n.every((function(n,t,i){!function(e){["endpoint","syncEndpoint"].forEach((function(n){if((0,o.d8)(e[n])){var r=e[n];e[n]={p1Consent:r,noP1Consent:r}}!(0,o.PO)(e[n])||e[n].p1Consent&&e[n].noP1Consent||["p1Consent","noP1Consent"].forEach((function(r){e[n][r]||(0,o.yN)("s2sConfig.".concat(n,".").concat(r," not defined.  PBS request will be skipped in some P1 scenarios."))}))}))}(e);var s=function(e){if(e.defaultVendor){var n=e.defaultVendor,r=Object.keys(e);if(!b[n])return(0,o.H)("Incorrect or unavailable prebid server default vendor option: "+n),!1;Object.keys(b[n]).forEach((function(t){J[t]!==e[t]&&(0,p.q9)(r,t)||(e[t]=b[n][t])}))}return e.enabled="boolean"==typeof e.enabled&&e.enabled}(n);if(!1!==s){var d=function(e){var n=Object.keys(e);if(["accountId","endpoint"].filter((function(e){return!(0,p.q9)(n,e)&&((0,o.H)(e+" missing in server to server config"),!0)})).length>0)return!1}(n);if(!1!==d)return Array.isArray(n.bidders)&&(i[t].bidders=n.bidders.filter((function(e){return-1===r.indexOf(e)&&(r.push(e),!0)}))),!0}return(0,o.yN)("prebidServer: s2s config is disabled"),!1}))?T=n:void 0}}function W(e,n,r,t){if(T.length!==H){H++;var i={uuid:(0,o.DO)(),bidders:e,account:t.accountId},s=t.userSyncLimit;(0,o.hj)(s)&&s>0&&(i.limit=s),n&&(i.gdpr=n.gdprApplies?1:0,!1!==n.gdprApplies&&(i.gdpr_consent=n.consentString)),r&&(i.us_privacy=r),"boolean"==typeof t.coopSync&&(i.coopSync=t.coopSync);var d=JSON.stringify(i);(0,l.h)(V(t.syncEndpoint,n),(function(e){try{z((e=JSON.parse(e)).bidder_status,t)}catch(e){(0,o.H)(e)}}),d,{contentType:"text/plain",withCredentials:!0})}}function z(e,n){if(0!==e.length){var r=e.shift();r.no_cookie?function(e,n,r,t,i){i.syncUrlModifier&&"function"==typeof i.syncUrlModifier[r]&&(n=i.syncUrlModifier[r](e,n,r));!function(e,n,r,t,i){n?"image"===e||"redirect"===e?((0,o.ji)('Invoking image pixel user sync for bidder: "'.concat(r,'"')),(0,o.hq)(n,t,i)):"iframe"===e?((0,o.ji)('Invoking iframe user sync for bidder: "'.concat(r,'"')),(0,o.Vs)(n,t,i)):((0,o.H)('User sync type "'.concat(e,'" not supported for bidder: "').concat(r,'"')),t()):((0,o.H)('No sync url for bidder "'.concat(r,'": ').concat(n)),t())}(e,n,r,t,i.syncTimeout)}(r.usersync.type,r.usersync.url,r.bidder,o.ak.call(z,null,e,n),n):z(e,n)}}a.vc.setDefaults({s2sConfig:J}),U("s2sConfig",(function(e){return M(e.s2sConfig)}));var Y={};function F(e){var n,r,t=function(e,n){if([e,n].every(o.d8))return Y["".concat(e).concat(n)]}(e.auctionId,e.adId);(0,o.d8)(t)&&((0,o.ji)('Invoking image pixel for wurl on BID_WIN: "'.concat(t,'"')),(0,o.hq)(t),n=e.auctionId,r=e.adId,[n,r].every(o.d8)&&(Y["".concat(n).concat(r)]=void 0))}function V(e,n){return(0,y.h)(n)?e.p1Consent:e.noP1Consent}function G(e){var n,r;return Array.isArray(e)&&e.length>0&&(n=e[0].gdprConsent,r=e[0].uspConsent),{gdprConsent:n,uspConsent:r}}var Q=(0,v.z3)("sync",(function(e,n,r,t){var i=t.onResponse,s=t.onError,d=t.onBid,c=G(n).gdprConsent,u=(0,o.I8)(e.ad_units),f=u.map((function(e){return e.bids.map((function(e){return e.bidder})).filter(o.tT)})).reduce(o.xH,[]).filter(o.tT),b=e.metrics.measureTime("buildRequests",(function(){return function(e,n,r,t,i){var s=(0,o.AB)(),d=new Set,c=[];r.forEach((function(e){var r=new Map;e.bids.forEach((function(t){null!=t.mediaTypes&&(0,o.yN)("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(e.code,", bidder: ").concat(t.bidder)),r.set(t.bidder,(0,o.zE)(t.bid_id,n))}));for(var t=e.code,i=1;d.has(t);)i++,t="".concat(e.code,"-").concat(i);d.add(t),c.push(k(k(k({},e),(0,o.iG)(r.values().next().value||{},["userId","userIdAsEids","schain"])),{},{pbsData:{impId:t,actualBidRequests:r,adUnit:e}}))}));var u=Object.fromEntries(Object.entries(n[0]).filter((function(e){var n=(0,m.Z)(e,1)[0];return!A.has(n)})));return N.toORTB({bidderRequest:u,bidRequests:c,context:{currency:a.vc.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:s,s2sBidRequest:e,requestedBidders:t,actualBidderRequests:n,eidPermissions:i,nativeRequest:e.s2sConfig.ortbNative}})}(e,n,u,f,Z)})),l=b&&JSON.stringify(b);(0,o.PN)("BidRequest: "+l);var v=V(e.s2sConfig.endpoint,c);if(b&&l&&v){var y=e.metrics.startTiming("net");r(v,{success:function(n){var r;y();try{r=JSON.parse(n);var t=e.metrics.measureTime("interpretResponse",(function(){return function(e,n){return N.fromORTB({response:e,request:n})}(r,b).bids}));t.forEach(d)}catch(e){(0,o.H)(e)}!r||r.status&&(0,p.q9)(r.status,"Error")?((0,o.H)("error parsing response: ",r?r.status:"not valid JSON"),i(!1,f)):i(!0,f)},error:function(){y(),s.apply(this,arguments)}},l,{contentType:"text/plain",withCredentials:!0})}else(0,o.H)("PBS request not made.  Check endpoints.")}),"processPBSRequest");(0,o.EE)().setEidPermissions=function(e){Z=e},c.ZP.registerBidAdapter(new function(){var e=new i.Z("prebidServer");return e.callBids=function(e,n,r,t,i){var p=e.metrics=(0,_.Bf)((0,s.Z)(n,"0.metrics")).newMetrics().renameWith((function(n){return["adapter.s2s.".concat(n),"adapters.s2s.".concat(e.s2sConfig.defaultVendor,".").concat(n)]}));t=p.startTiming("total").stopBefore(t),n.forEach((function(e){return(0,_.Bf)(e.metrics).join(p,{continuePropagation:!1})}));var b=G(n),l=b.gdprConsent,v=b.uspConsent;if(Array.isArray(T)){if(e.s2sConfig&&e.s2sConfig.syncEndpoint&&V(e.s2sConfig.syncEndpoint,l))W(e.s2sConfig.bidders.map((function(e){return c.ZP.aliasRegistry[e]||e})).filter((function(e,n,r){return r.indexOf(e)===n})),l,v,e.s2sConfig);Q(e,n,i,{onResponse:function(e,r){e&&n.forEach((function(e){return f.j8(d.FP.BIDDER_DONE,e)})),t(),function(e,n,r){e.forEach((function(e){var t=c.ZP.getBidAdapter(e);t&&t.registerSyncs&&a.vc.runWithBidder(e,o.ak.call(t.registerSyncs,t,[],n,r))}))}(r,l,v)},onError:t,onBid:function(n){var t,i,s,c=n.adUnit,a=n.bid,f=a.metrics=e.metrics.fork().renameWith();f.checkpoint("addBidResponse"),null!=a.requestId&&null!=a.requestBidder||e.s2sConfig.allowUnknownBidderCodes?f.measureTime("addBidResponse.validate",(function(){return(0,u.JY)(c,a)}))?(r(c,a),a.pbsWurl&&(t=a.auctionId,i=a.adId,s=a.pbsWurl,[t,i].every(o.d8)&&(Y["".concat(t).concat(i)]=s))):r.reject(c,a,d.Gw.UI):((0,o.yN)("PBS adapter received bid from unknown bidder (".concat(a.bidder,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.")),r.reject(c,a,d.Gw.Dg))}})}},f.on(d.FP.BID_WON,F),Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:D})},"prebidServer"),window.ic_pbjs.installedModules.push("prebidServerBidAdapter")},6372:function(e,n,r){r.d(n,{DZ:function(){return s},Px:function(){return d},TP:function(){return a},YC:function(){return c},Z:function(){return o},f8:function(){return l},fP:function(){return v},gm:function(){return t},md:function(){return u}});var t=["request","imp","bidResponse","response"],i=["default","pbs"],o=t[0],s=t[1],d=t[2],c=t[3],a=i[0],u=i[1],f=new Set(t);var p,b=(p={},{registerOrtbProcessor:function(e){var n=e.type,r=e.name,i=e.fn,o=e.priority,s=void 0===o?0:o,d=e.dialects,c=void 0===d?[a]:d;if(!f.has(n))throw new Error("ORTB processor type must be one of: ".concat(t.join(", ")));c.forEach((function(e){p.hasOwnProperty(e)||(p[e]={}),p[e].hasOwnProperty(n)||(p[e][n]={}),p[e][n][r]={priority:s,fn:i}}))},getProcessors:function(e){return p[e]||{}}}),l=b.registerOrtbProcessor,v=b.getProcessors},7673:function(e,n,r){r.d(n,{h:function(){return i}});var t=r(265);function i(e){return null==e||!e.gdprApplies||!0===(0,t.Z)(e,"vendorData.purpose.consents.1")}}},function(e){e.O(0,[279,951],(function(){return n=7781,e(e.s=n);var n}));e.O()}]);